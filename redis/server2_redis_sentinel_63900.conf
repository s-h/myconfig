# 设置端口
port 63900
# 是否守护进程启动
daemonize yes
# 守护进程运行的时候需要保留pidfile
pidfile "/var/run/redis-sentinel.pid"
# 日志文件
logfile "/data/docker/redis/redis_sentinel.log"
## sentinel monitor master-group-name hostname port quorum
## quorum的解释如下：
##（1）至少多少个哨兵要一致同意，master进程挂掉了，或者slave进程挂掉了，或者要启动一个故障转移操作
## （2）quorum是用来识别故障的，真正执行故障转移的时候，还是要在哨兵集群执行选举，选举一个哨兵进程出来执行故障转移操作
## （3）假设有5个哨兵，quorum设置了2，那么如果5个哨兵中的2个都认为master挂掉了; 2个哨兵中的一个就会做一个选举，选举一个哨兵出来，执行故障转移; 如果5个哨兵中有3个哨兵都是运行的，那么故障转移才会被允许执行。
# 原文是：Note that whatever is the ODOWN quorum, a Sentinel will require to
# be selected by the majority of the known Sentinels in order to
# start a failover, so no failover can be performed in minority.

#sentinel id ，建议注释掉，会自动生成
#sentinel myid 5eef5fb60282e87cb074f5952c98f8b79e064025

# down-after-milliseconds，超过多少毫秒跟一个redis实例断了连接（ping不通），哨兵就可能认为这个redis实例挂了
sentinel deny-scripts-reconfig yes

# parallel-syncs，新的master别切换之后，同时有多少个slave被切换到去连接新master，重新做同步，数字越低，花费的时间越多
# 比如：master宕机了，4个slave中有1个切换成了master，剩下3个slave就要挂到新的master上面去
# 这个时候，如果parallel-syncs是1，那么3个slave，一个一个地挂接到新的master上面去，1个挂接完，而且从新的master sync完数据之后，再挂接下一个。
# 如果parallel-syncs是3，那么一次性就会把所有slave挂接到新的master上去
sentinel monitor mymaster 172.17.68.161 6390 1
sentinel failover-timeout mymaster 30000
sentinel auth-pass mymaster jianghao

#failover-timeout，执行故障转移的timeout超时时长，Default is 3 minutes.
sentinel config-epoch mymaster 19
# Generated by CONFIG REWRITE
dir "/data"
sentinel leader-epoch mymaster 20
sentinel known-replica mymaster 172.17.68.160 6390

